var p5Drawer=function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function i(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var a={drawer:{image:new e.Image,imageFile:"https://raw.githack.com/doriclaudino/p5.drawer/master/assets/images/pencildrawer.png",soundFile:"https://raw.githubusercontent.com/doriclaudino/p5.drawer/master/assets/sounds/pencildrawer.mp3"},axidrawer:{image:new e.Image,imageFile:"https://raw.githack.com/doriclaudino/p5.drawer/master/assets/images/axidrawer.png",soundFile:"https://raw.githubusercontent.com/doriclaudino/p5.drawer/master/assets/sounds/axidrawer.mp3"},scribitdrawer:{image:new e.Image,imageFile:"https://raw.githack.com/doriclaudino/p5.drawer/master/assets/images/scribitdrawer.png",soundFile:"https://raw.githubusercontent.com/doriclaudino/p5.drawer/master/assets/sounds/axidrawer.mp3"}};e.prototype.initDrawer=function(n){var r=this;Object.keys(a).forEach(function(e){function i(t){return a[e].image=t}function t(t){return a[e].sound=t}var o=a&&a[e],s=n&&n[e];s&&s.image?"string"==typeof s.image?r.loadImage(s.image,i,function(t){return r.loadImage(o.imageFile,i)}):i(s.image):r.loadImage(o.imageFile,i),s&&s.sound?"string"==typeof s.sound?r.loadSound(s.sound,i,function(t){return r.loadSound(o.soundFile,i)}):t(s.sound):r.loadSound(o.soundFile,t)})},e.prototype.registerMethod("init",e.prototype.initDrawer);var s=(Object.defineProperty(n.prototype,"sketch",{get:function(){return this._sketch},set:function(t){this._sketch=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sound",{get:function(){return this._sound},set:function(t){this._sound=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"image",{get:function(){return this._image},set:function(t){this._image=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"steps",{get:function(){return this._steps},set:function(t){this._steps=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"targetPosition",{get:function(){return this._targetPosition},set:function(t){this._targetPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"saveSteps",{get:function(){return this._saveSteps},set:function(t){this._saveSteps=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"penTipPosition",{get:function(){return this._penTipPosition},set:function(t){this._penTipPosition=t},enumerable:!0,configurable:!0}),n.prototype.stopSound=function(){this.sound&&this.sound.stop()},Object.defineProperty(n.prototype,"hasToMove",{get:function(){return this.targetPosition&&this.position&&0<this.targetDistance},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"targetReached",{get:function(){return!this.hasToMove},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"targetDistance",{get:function(){return this.sketch.dist(this.targetPosition.x,this.targetPosition.y,this.position.x,this.position.y)},enumerable:!0,configurable:!0}),n.prototype.playAudio=function(t){this.hasToMove?this.sound&&!this.sound.isPlaying()&&this.sound.play():this.sound&&this.sound.stop(),this.applySoundSpeed(t)},n.prototype.applySoundSpeed=function(t){var e=t||this.speed,i=this.sketch.map(e,1,100,.5,4);i=this.sketch.constrain(i,.01,4),this.sound&&this.sound.rate(i)},n.prototype.moveTo=function(t,e){this.targetPosition=t,this.startMovement(e)},n.prototype.startMovement=function(t){this.hasToMove&&this.updateToNextPosition(t),this.draw(),this.playAudio(t)},n.prototype.draw=function(){this.sketch.push(),this.sketch.translate(this.penTipPosition),this.image&&this.sketch.image(this.image,this.position.x,this.position.y),this.sketch.pop()},n.prototype.updateToNextPosition=function(t){var e,i,o,s,n,r,a=t||this.speed;o=Math.abs(this.targetPosition.x-this.position.x),s=Math.abs(this.targetPosition.y-this.position.y),n=Math.min(a,o),r=Math.min(a,s),i=this.position.x>this.targetPosition.x?this.position.x-n:this.position.x+n,e=this.position.y>this.targetPosition.y?this.position.y-r:this.position.y+r;var p=this.sketch.createVector(i,e);this.saveSteps&&this.steps.push(p),this.position=p},n);function n(t){if(this._sketch=t||window,!this.sketch)throw"p5 not defined";this._speed=2,this._image=a.drawer.image,this._sound=a.drawer.sound,this._position=this._sketch.createVector(0,0),this._targetPosition=this._sketch.createVector(0,0),this._saveSteps=!0,this._penTipPosition=this._sketch.createVector(-52,-128),this._steps=[],this.image&&this.sound||console.warn("Make sure to load the image and sound on preload(), we remove the boths from build. See the example folder.")}var r,p=(i(u,r=s),u);function u(t){var e=r.call(this,t)||this;return e._image=a.axidrawer.image,e._sound=a.axidrawer.sound,e.speed=2*e.speed,e.penTipPosition=e.sketch.createVector(-100,-52),e}var h,c=(i(d,h=s),d);function d(t){var e=h.call(this,t)||this;return e._image=a.scribitdrawer.image,e._sound=a.scribitdrawer.sound,e.speed=2*e.speed,e.penTipPosition=e.sketch.createVector(-140,-108),e}return t.Drawer=s,t.AxiDrawer=p,t.ScribitDrawer=c,t}({},p5);
//# sourceMappingURL=p5.drawer.es5.js.map
